# yaml-language-server: $schema=https://raw.githubusercontent.com/typeddjango/pytest-mypy-plugins/master/pytest_mypy_plugins/schema.json
- case: hset
  parametrized:
    - value: {"a": 1}
    - value: {"a": "b"}
    - value: {b"a": b"b"}
    - value: {"a": b"b"}
    - value: {"a": 1, b"b": 2, "c": 1.0}

  main: |
    from coredis import Redis
    async def test() -> None:
        redis = Redis()
        async with redis:
            result = await redis.hset("test", {{value}})
- case: hset_invalid
  parametrized:
    - value: [("a", 1)]
    - value: {"a": [1]}
  regex: yes
  main: |
    from coredis import Redis
    async def test() -> None:
        redis = Redis()
        async with redis:
            result = await redis.hset("test", {{value}})  #   # E: .*has incompatible type.*
